<!DOCTYPE html>
<html>
    <head>
        <title>Reddit API Test</title>
        <script>
            // https://stackoverflow.com/questions/692196/post-request-javascript
            
            
            function getCode() {
                var AUTH_GET_URL_PREFIX = "https://www.reddit.com/api/v1/authorize?";
                var CLIENT_ID_PARAM = "client_id=" + document.getElementById("client-id").value;
                var RESPONSE_TYPE_PARAM = "&response_type=code";
                var STATE_PARAM = "&state=" + getRandomCode();
                var REDIRECT_URI_PARAM = "&redirect_uri=" + document.getElementById("redirect-uri").value;
                var DURATION_PARAM = "&duration=permanent";
                var SCOPE_PARAM = "&scope=edit";
                
                var REQUEST_URL = AUTH_GET_URL_PREFIX + CLIENT_ID_PARAM + 
                    RESPONSE_TYPE_PARAM + STATE_PARAM + REDIRECT_URI_PARAM +
                    DURATION_PARAM + SCOPE_PARAM;
                console.log(REQUEST_URL);
                document.getElementById("token-link").href = REQUEST_URL;
                
            }
            
            // https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript
            function getRandomCode() {
                return Math.random().toString(36).slice(2, 7);
            }
            
            function postToken() {
                AUTH_POST_URL = "https://cors-anywhere.herokuapp.com/https://www.reddit.com/api/v1/access_token";
                AUTH_POST_BODY_GRANT_PARAM = "grant_type=authorization_code";
                AUTH_POST_BODY_CODE_PARAM = "&code=" + document.getElementById("redirect-uri").value;
                AUTH_POST_BODY_REDIRECT_URI_PARAM = "&redirect_uri=" + document.getElementById("redirect-uri").value;
                
                AUTH_POST_BODY = AUTH_POST_BODY_GRANT_PARAM + AUTH_POST_BODY_CODE_PARAM + AUTH_POST_BODY_REDIRECT_URI_PARAM;
                
                var xhr = new XMLHttpRequest();
                xhr.open("POST", AUTH_POST_URL, true);
                xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                //xhr.setRequestHeader("Access-Control-Allow-Origin","*");
                xhr.send(AUTH_POST_BODY);
                
            }
        </script>
    </head>
    <body>
        CLIENT ID: <input type="text" id="client-id"><br>
        REDIRECT_URI: <input type="text" id="redirect-uri"><br>
        <button onclick="getCode()">GET CODE</button><br>
        <a id="token-link" href="" target="_blank">Code Token Link</a><br>
        AUTH CODE: <input type="text" id="auth-code"><br>
        <button onclick="postToken()">GET AUTH TOKEN</button><br>
    </body>
</html>